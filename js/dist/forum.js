(()=>{var a={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return a.d(t,{a:t}),t},d:(r,t)=>{for(var e in t)a.o(t,e)&&!a.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})},o:(a,r)=>Object.prototype.hasOwnProperty.call(a,r),r:a=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}},r={};(()=>{"use strict";a.r(r);const t=flarum.core.compat["forum/app"];var e=a.n(t);const o=flarum.core.compat["common/Model"];var s=a.n(o);const n=flarum.core.compat["common/extend"],c=flarum.core.compat["forum/components/AvatarEditor"];var u=a.n(c);const l=flarum.core.compat["common/components/Button"];var i=a.n(l);e().initializers.add("vlssu/flarum-cravatar",(function(){e().store.models.users.prototype.cravatar=s().attribute("cravatar"),(0,n.extend)(u().prototype,"controlItems",(function(a){var r=this,t=this.attrs.user,o=e().forum.attribute("vlssu-cravatar.allow-user-toggle");if(t.cravatar()&&(a.remove("remove"),a.add("cravatar",m("a",{href:"https://cravatar.cn",target:"_blank",class:"hasIcon"},m("i",{class:"icon fas fa-edit Button-icon"}),m("span",{class:"Button-label"},e().translator.trans("vlssu-flarum-cravatar.forum.settings.edit-cravatar"))))),o&&e().session.user&&e().session.user.id()===t.id()){var s=!!t.cravatar();a.add("cravatar-toggle",i().component({className:"Button",icon:s?"fas fa-upload":"fas fa-user-circle",loading:this.cravatarToggleLoading,onclick:function(){r.cravatarToggleLoading=!0;var a=!s;t.savePreferences({"vlssu-cravatar.use":a}).then((function(){return e().store.find("users",t.id())})).then((function(a){t.pushData(a.data)})).finally((function(){r.cravatarToggleLoading=!1,m.redraw()}))}},e().translator.trans(s?"vlssu-flarum-cravatar.forum.settings.use-uploaded":"vlssu-flarum-cravatar.forum.settings.use-cravatar")))}}))}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map